{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{Navigate,useNavigate,useParams}from\"react-router-dom\";import'../styles/ProductDetials.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProductDetails=()=>{const navigate=useNavigate();const{id}=useParams();const[product,setProduct]=useState(null);const[similarProducts,setSimilarProducts]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const fetchProductDetails=async()=>{try{const response=await fetch(`https://roofings-server.vercel.app/api/product/getProduct/${id}`);const data=await response.json();if(!response.ok||!data.success){throw new Error(data.message||\"Product not found\");}setProduct(data.product);const allProductsResponse=await fetch(\"https://roofings-server.vercel.app/api/product/getProduct\");const allProductsData=await allProductsResponse.json();if(!allProductsResponse.ok||!allProductsData.success){throw new Error(\"Failed to fetch products\");}setSimilarProducts(allProductsData.products.filter(item=>item.category.trim().toLowerCase()===data.product.category.trim().toLowerCase()&&item._id!==data.product._id).sort(()=>Math.random()-0.5).slice(0,4));}catch(err){setError(err.message);}finally{setLoading(false);}};fetchProductDetails();},[id]);if(!product){return/*#__PURE__*/_jsx(\"h2\",{children:\"Product not found\"});}const handleAddToTopPicks=()=>{let favourites=JSON.parse(localStorage.getItem(\"favourites\"))||[];const exists=favourites.find(item=>item._id===product._id);if(!exists){favourites.push(product);localStorage.setItem(\"favourites\",JSON.stringify(favourites));}navigate('/favourites');};return/*#__PURE__*/_jsxs(\"div\",{className:\"product-details-container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"product-details-header\",children:product.category}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-detials-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"product-details-left\",children:/*#__PURE__*/_jsx(\"img\",{src:product.image,className:\"product-details-img\",alt:product.category})}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-detials-right\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Material: \"}),\" \",product.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Color: \"}),product.colour]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Dimension: \"}),product.dimension]}),/*#__PURE__*/_jsx(\"p\",{className:\"product-detials-desc\",children:product.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-detials-btn\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleAddToTopPicks,className:\"product-detials-favbtn\",children:\"Add to Top Picks\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/contact'),className:\"product-detials-contactbtn\",children:\"Contact us\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"similiar-products\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Similiar Products\"}),/*#__PURE__*/_jsx(\"div\",{className:\"similar-products-container\",children:similarProducts.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No similar products available\"}):similarProducts.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"similar-product-item\",children:[/*#__PURE__*/_jsx(\"img\",{src:item.img,alt:item.name,className:\"similar-product-img\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"similiar-products-material\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Material:\"}),\" \",item.name]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"products-view-details-btn\",onClick:()=>navigate(`/products/${item._id}`),children:\"View Details\"})})]})]},item._id))})]})]});};export default ProductDetails;","map":{"version":3,"names":["React","useEffect","useState","Navigate","useNavigate","useParams","jsx","_jsx","jsxs","_jsxs","ProductDetails","navigate","id","product","setProduct","similarProducts","setSimilarProducts","loading","setLoading","error","setError","fetchProductDetails","response","fetch","data","json","ok","success","Error","message","allProductsResponse","allProductsData","products","filter","item","category","trim","toLowerCase","_id","sort","Math","random","slice","err","children","handleAddToTopPicks","favourites","JSON","parse","localStorage","getItem","exists","find","push","setItem","stringify","className","src","image","alt","name","colour","dimension","description","onClick","length","map","img"],"sources":["D:/Roofings/frontend/src/Pages/ProductDetials.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Navigate, useNavigate, useParams } from \"react-router-dom\";\r\nimport '../styles/ProductDetials.css'\r\n\r\nconst ProductDetails = () => {\r\n  const navigate = useNavigate();\r\n  const { id } = useParams();  \r\n  const [product, setProduct] = useState(null);\r\n  const [similarProducts, setSimilarProducts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchProductDetails = async () => {\r\n      try {\r\n        const response = await fetch(`https://roofings-server.vercel.app/api/product/getProduct/${id}`);\r\n        const data = await response.json();\r\n\r\n        if (!response.ok || !data.success) {\r\n          throw new Error(data.message || \"Product not found\");\r\n        }\r\n\r\n        setProduct(data.product);\r\n\r\n        const allProductsResponse = await fetch(\"https://roofings-server.vercel.app/api/product/getProduct\");\r\n        const allProductsData = await allProductsResponse.json();\r\n\r\n        if (!allProductsResponse.ok || !allProductsData.success) {\r\n          throw new Error(\"Failed to fetch products\");\r\n        }\r\n\r\n        setSimilarProducts(\r\n          allProductsData.products\r\n            .filter(\r\n              (item) =>\r\n                item.category.trim().toLowerCase() === data.product.category.trim().toLowerCase() &&\r\n                item._id !== data.product._id\r\n            )\r\n            .sort(() => Math.random() - 0.5)\r\n            .slice(0, 4)\r\n        );\r\n      } catch (err) {\r\n        setError(err.message);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchProductDetails();\r\n  }, [id]);\r\n\r\n\r\n  if (!product) {\r\n    return <h2>Product not found</h2>; \r\n  }\r\n\r\n  const handleAddToTopPicks = () => {\r\n    let favourites = JSON.parse(localStorage.getItem(\"favourites\")) || [];\r\n    const exists = favourites.find(item => item._id === product._id);\r\n\r\n    if (!exists) {\r\n      favourites.push(product);\r\n      localStorage.setItem(\"favourites\", JSON.stringify(favourites));\r\n    }\r\n\r\n    navigate('/favourites');\r\n  };\r\n\r\n\r\n  return (\r\n    <div className=\"product-details-container\">\r\n    <h1 className=\"product-details-header\">{product.category}</h1>\r\n    <div className=\"product-detials-container\">\r\n        <div className=\"product-details-left\">\r\n            <img src={product.image} className=\"product-details-img\" alt={product.category} />\r\n        </div>\r\n        <div className=\"product-detials-right\">\r\n            <p><strong>Material: </strong> {product.name}</p>\r\n            <p><strong>Color: </strong>{product.colour}</p>\r\n            <p><strong>Dimension: </strong>{product.dimension}</p>\r\n            <p className=\"product-detials-desc\">{product.description}</p>\r\n            <div className=\"product-detials-btn\">\r\n                <button onClick={handleAddToTopPicks} className=\"product-detials-favbtn\">Add to Top Picks</button>\r\n                <button onClick={()=>navigate('/contact')} className=\"product-detials-contactbtn\">Contact us</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div className=\"similiar-products\">\r\n      <h3>Similiar Products</h3>\r\n      <div className=\"similar-products-container\">\r\n          {similarProducts.length === 0 ? (\r\n            <p>No similar products available</p>\r\n          ) : (\r\n            similarProducts.map((item) => (\r\n              <div key={item._id} className=\"similar-product-item\">\r\n                <img src={item.img} alt={item.name} className=\"similar-product-img\" />\r\n                <div className=\"similiar-products-material\">\r\n                  <div>\r\n                      <p><strong>Material:</strong> {item.name}</p>\r\n                    </div>\r\n                    <div>\r\n                      <button className=\"products-view-details-btn\" onClick={() => navigate(`/products/${item._id}`)}>View Details</button>\r\n                    </div>\r\n                </div>\r\n              </div>\r\n            ))\r\n          )}  \r\n        </div>\r\n    </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductDetails;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}