{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useNavigate,useLocation}from\"react-router-dom\";import\"../styles/Product.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Product=()=>{const navigate=useNavigate();const location=useLocation();const queryParams=new URLSearchParams(location.search);const selectedCategory=queryParams.get(\"category\");const[products,setProducts]=useState([]);const[searchTerm,setSearchTerm]=useState(\"\");const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const categories=[...new Set(products.map(product=>product.category))];const filteredProducts=products.filter(product=>{const matchesCategory=selectedCategory?product.category===selectedCategory:true;const matchesSearch=product.name.toLowerCase().includes(searchTerm.toLowerCase());return matchesCategory&&matchesSearch;});useEffect(()=>{const fetchProducts=async()=>{try{const response=await fetch(\"https://roofings-server.vercel.app/api/product/getProduct\");if(!response.ok){throw new Error(\"Failed to fetch products\");}const data=await response.json();if(Array.isArray(data)){setProducts(data);}else if(data.products&&Array.isArray(data.products)){setProducts(data.products);}else{throw new Error(\"Invalid product data format\");}}catch(err){setError(err.message);setProducts([]);}};fetchProducts();},[]);const handleCategoryChange=event=>{const category=event.target.value;if(category===\"All\"){navigate(\"/products\");}else{navigate(`/products?category=${category}`);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"product-container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"product-header\",children:\"Products\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search products...\",className:\"search-box\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value)}),/*#__PURE__*/_jsxs(\"select\",{className:\"category-dropdown\",onChange:handleCategoryChange,value:selectedCategory||\"All\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"All\",children:\"All Categories\"}),categories.map(category=>/*#__PURE__*/_jsx(\"option\",{value:category,children:category},category))]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"products\",children:filteredProducts.length>0?filteredProducts.map(product=>/*#__PURE__*/_jsxs(\"div\",{className:\"product-item\",children:[/*#__PURE__*/_jsx(\"img\",{src:product.image,className:\"products-img\",alt:product.name}),/*#__PURE__*/_jsx(\"p\",{className:\"products-name\",children:product.name}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(`/products/${product._id}`),className:\"products-button\",children:\"View Details\"})]},product._id)):/*#__PURE__*/_jsx(\"p\",{className:\"no-products\",children:\"No products found.\"})})]});};export default Product;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useLocation","jsx","_jsx","jsxs","_jsxs","Product","navigate","location","queryParams","URLSearchParams","search","selectedCategory","get","products","setProducts","searchTerm","setSearchTerm","loading","setLoading","error","setError","categories","Set","map","product","category","filteredProducts","filter","matchesCategory","matchesSearch","name","toLowerCase","includes","fetchProducts","response","fetch","ok","Error","data","json","Array","isArray","err","message","handleCategoryChange","event","target","value","className","children","type","placeholder","onChange","e","length","src","image","alt","onClick","_id"],"sources":["D:/Roofings/frontend/src/Pages/Product.jsx"],"sourcesContent":["import React, { useState ,useEffect } from \"react\";\r\nimport { useNavigate, useLocation } from \"react-router-dom\";\r\nimport \"../styles/Product.css\";\r\n\r\nconst Product = () => {\r\n    const navigate = useNavigate();\r\n    const location = useLocation();\r\n\r\n    const queryParams = new URLSearchParams(location.search);\r\n    const selectedCategory = queryParams.get(\"category\");\r\n\r\n    const [products, setProducts] = useState([]);\r\n    const [searchTerm, setSearchTerm] = useState(\"\");\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n\r\n    const categories = [...new Set(products.map((product) => product.category))];\r\n\r\n    const filteredProducts = products.filter((product) => {\r\n        const matchesCategory = selectedCategory ? product.category === selectedCategory : true;\r\n        const matchesSearch = product.name.toLowerCase().includes(searchTerm.toLowerCase());\r\n        return matchesCategory && matchesSearch;\r\n    });\r\n\r\n    useEffect(() => {\r\n        const fetchProducts = async () => {\r\n            try {\r\n                const response = await fetch(\"https://roofings-server.vercel.app/api/product/getProduct\");\r\n                if (!response.ok) {\r\n                    throw new Error(\"Failed to fetch products\");\r\n                }\r\n                const data = await response.json();\r\n                if (Array.isArray(data)) {\r\n                    setProducts(data);\r\n                } else if (data.products && Array.isArray(data.products)) {\r\n                    setProducts(data.products);\r\n                } else {\r\n                    throw new Error(\"Invalid product data format\");\r\n                }            \r\n            } catch (err) {\r\n                setError(err.message);\r\n                setProducts([]);\r\n            }\r\n        };\r\n\r\n        fetchProducts();\r\n    }, []);\r\n\r\n    const handleCategoryChange = (event) => {\r\n        const category = event.target.value;\r\n        if (category === \"All\") {\r\n            navigate(\"/products\");\r\n        } else {\r\n            navigate(`/products?category=${category}`);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"product-container\">\r\n            <h1 className=\"product-header\">Products</h1>\r\n\r\n            <div className=\"filter-container\">\r\n                <input\r\n                    type=\"text\"\r\n                    placeholder=\"Search products...\"\r\n                    className=\"search-box\"\r\n                    value={searchTerm}\r\n                    onChange={(e) => setSearchTerm(e.target.value)}\r\n                />\r\n\r\n                <select className=\"category-dropdown\" onChange={handleCategoryChange} value={selectedCategory || \"All\"}>\r\n                    <option value=\"All\">All Categories</option>\r\n                    {categories.map((category) => (\r\n                        <option key={category} value={category}>\r\n                            {category}\r\n                        </option>\r\n                    ))}\r\n                </select>\r\n            </div>\r\n\r\n            <div className=\"products\">\r\n                {filteredProducts.length > 0 ? (\r\n                    filteredProducts.map((product) => (\r\n                        <div key={product._id} className=\"product-item\">\r\n                            <img src={product.image} className=\"products-img\" alt={product.name} />\r\n                            <p className=\"products-name\">{product.name}</p>\r\n                            <button onClick={() => navigate(`/products/${product._id}`)} className=\"products-button\">\r\n                                View Details\r\n                            </button>\r\n                        </div>\r\n                    ))\r\n                ) : (\r\n                    <p className=\"no-products\">No products found.</p>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Product;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}